(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66575,e=>{"use strict";e.s(["AuthWrapper",()=>l]);var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(27225);function l(e){let{children:l}=e,[n,i]=(0,s.useState)(!0),{user:d,setUser:c}=(0,a.useAuthStore)(),o=(0,r.useRouter)();return((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/session");if(e.ok){let t=await e.json();c(t.user)}else c(null)}catch(e){console.error("Auth check failed:",e),c(null)}finally{i(!1)}})()},[c]),n)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):(null==d?void 0:d.isAuthenticated)?(0,t.jsx)(t.Fragment,{children:l}):(o.push("/login"),null)}},30257,e=>{"use strict";e.s(["default",()=>o],30257);var t=e.i(43476),s=e.i(66575),r=e.i(71645),a=e.i(18566),l=e.i(19455),n=e.i(15288),i=e.i(27225),d=e.i(75157);function c(){let{user:e,logout:s}=(0,i.useAuthStore)(),{openTrades:c,closedTrades:o,setTrades:x}=(0,i.useTradesStore)(),[m,h]=(0,r.useState)(!0),u=(0,a.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/trades/log");if(e.ok){let t=await e.json();x(t.data)}}catch(e){console.error("Failed to fetch trades:",e)}finally{h(!1)}})()},[x]);let j=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),s(),u.push("/login")}catch(e){console.error("Logout failed:",e)}},p=(()=>{let e=o.length,t=o.filter(e=>(e.pnl||0)>0).length,s=o.reduce((e,t)=>e+(t.pnl||0),0);return{totalTrades:e,winningTrades:t,totalPnL:s,totalFees:o.reduce((e,t)=>e+(t.fees||0),0),winRate:e>0?t/e:0}})();return(0,t.jsxs)("div",{className:"min-h-screen gradient-bg",children:[(0,t.jsx)("header",{className:"glass-card border-b border-blue-500/20",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-20",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-blue-600 bg-clip-text text-transparent",children:"TFZ Trading Assistant"}),(0,t.jsxs)("p",{className:"text-neutral-text mt-1",children:["Welcome back, ",null==e?void 0:e.username," • Your options trading command center"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(l.Button,{onClick:()=>u.push("/scanner"),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold px-6 py-2 rounded-lg primary-glow transition-all duration-200",children:"🔍 Scanner"}),(0,t.jsx)(l.Button,{onClick:()=>u.push("/recommend"),className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold px-6 py-2 rounded-lg success-glow transition-all duration-200",children:"🎯 Recommender"}),(0,t.jsx)(l.Button,{variant:"outline",onClick:j,className:"border-red-500/30 text-red-400 hover:bg-red-500/10 hover:border-red-400 danger-glow",children:"Logout"})]})]})})}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)(n.Card,{className:"trading-card",children:[(0,t.jsx)(n.CardHeader,{className:"pb-3",children:(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-blue-300 flex items-center",children:"📊 Open Trades"})}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-white",children:c.length}),(0,t.jsx)("div",{className:"text-xs text-neutral-text mt-1",children:"Active positions"})]})]}),(0,t.jsxs)(n.Card,{className:"trading-card",children:[(0,t.jsx)(n.CardHeader,{className:"pb-3",children:(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-green-300 flex items-center",children:"💰 Total P&L"})}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold ".concat(p.totalPnL>=0?"profit-text":"loss-text"),children:(0,d.formatCurrency)(p.totalPnL)}),(0,t.jsx)("div",{className:"text-xs text-neutral-text mt-1",children:"All time"})]})]}),(0,t.jsxs)(n.Card,{className:"trading-card",children:[(0,t.jsx)(n.CardHeader,{className:"pb-3",children:(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-yellow-300 flex items-center",children:"🎯 Win Rate"})}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-yellow-400",children:(0,d.formatPercent)(p.winRate)}),(0,t.jsxs)("div",{className:"text-xs text-neutral-text mt-1",children:[p.winningTrades,"/",p.totalTrades," trades"]})]})]}),(0,t.jsxs)(n.Card,{className:"trading-card",children:[(0,t.jsx)(n.CardHeader,{className:"pb-3",children:(0,t.jsx)(n.CardTitle,{className:"text-sm font-medium text-red-300 flex items-center",children:"💸 Total Fees"})}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold loss-text",children:(0,d.formatCurrency)(p.totalFees)}),(0,t.jsx)("div",{className:"text-xs text-neutral-text mt-1",children:"Commissions paid"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)(n.Card,{className:"trading-card",children:[(0,t.jsxs)(n.CardHeader,{className:"border-b border-blue-500/20",children:[(0,t.jsx)(n.CardTitle,{className:"text-xl font-semibold text-blue-400",children:"Open Trades"}),(0,t.jsx)(n.CardDescription,{className:"text-neutral-text",children:"Currently active positions"})]}),(0,t.jsx)(n.CardContent,{className:"pt-6",children:m?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-neutral-text",children:"Loading trades..."})]}):0===c.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"text-4xl mb-3",children:"📈"}),(0,t.jsx)("p",{className:"text-neutral-text",children:"No open trades"}),(0,t.jsx)("p",{className:"text-sm text-neutral-text mt-1",children:"Start by scanning for opportunities"})]}):(0,t.jsx)("div",{className:"space-y-4",children:c.slice(0,5).map((e,s)=>(0,t.jsx)("div",{className:"glass-card p-4 rounded-lg border border-blue-500/20 hover:border-blue-400/40 transition-all duration-200",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-bold text-lg text-white",children:e.ticker}),(0,t.jsxs)("div",{className:"text-sm text-neutral-text",children:[e.side," spread • ",e.dte," DTE"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-semibold text-green-400",children:(0,d.formatCurrency)(e.credit)}),(0,t.jsxs)("div",{className:"text-sm text-neutral-text",children:[e.shortStrike,"/",e.longStrike]})]})]})},s))})})]}),(0,t.jsxs)(n.Card,{className:"trading-card",children:[(0,t.jsxs)(n.CardHeader,{className:"border-b border-green-500/20",children:[(0,t.jsx)(n.CardTitle,{className:"text-xl font-semibold text-green-400",children:"Recent Closed Trades"}),(0,t.jsx)(n.CardDescription,{className:"text-neutral-text",children:"Last 5 completed positions"})]}),(0,t.jsx)(n.CardContent,{className:"pt-6",children:m?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-400 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-neutral-text",children:"Loading trades..."})]}):0===o.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"text-4xl mb-3",children:"📊"}),(0,t.jsx)("p",{className:"text-neutral-text",children:"No closed trades"}),(0,t.jsx)("p",{className:"text-sm text-neutral-text mt-1",children:"Your trading history will appear here"})]}):(0,t.jsx)("div",{className:"space-y-4",children:o.slice(0,5).map((e,s)=>(0,t.jsx)("div",{className:"glass-card p-4 rounded-lg border border-green-500/20 hover:border-green-400/40 transition-all duration-200",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-bold text-lg text-white",children:e.ticker}),(0,t.jsxs)("div",{className:"text-sm text-neutral-text",children:[e.side," spread • Closed ",new Date(e.closedAt||"").toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-semibold ".concat((e.pnl||0)>=0?"profit-text":"loss-text"),children:(0,d.formatCurrency)(e.pnl||0)}),(0,t.jsx)("div",{className:"text-sm text-neutral-text",children:(0,d.formatCurrency)(e.credit)})]})]})},s))})})]})]})]})]})}function o(){return(0,t.jsx)(s.AuthWrapper,{children:(0,t.jsx)(c,{})})}}]);