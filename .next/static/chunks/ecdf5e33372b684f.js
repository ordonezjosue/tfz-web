(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66575,e=>{"use strict";e.s(["AuthWrapper",()=>i]);var r=e.i(43476),s=e.i(71645),t=e.i(18566),a=e.i(27225);function i(e){let{children:i}=e,[l,n]=(0,s.useState)(!0),{user:d,setUser:c}=(0,a.useAuthStore)(),o=(0,t.useRouter)();return((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/session");if(e.ok){let r=await e.json();c(r.user)}else c(null)}catch(e){console.error("Auth check failed:",e),c(null)}finally{n(!1)}})()},[c]),l)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):(null==d?void 0:d.isAuthenticated)?(0,r.jsx)(r.Fragment,{children:i}):(o.push("/login"),null)}},93479,10204,e=>{"use strict";e.s(["Input",()=>a],93479);var r=e.i(43476),s=e.i(71645),t=e.i(75157);let a=s.forwardRef((e,s)=>{let{className:a,type:i,...l}=e;return(0,r.jsx)("input",{type:i,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...l})});a.displayName="Input",e.s(["Label",()=>c],10204),e.i(74080);var i=e.i(91918),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,i.createSlot)("Primitive.".concat(t)),l=s.forwardRef((e,s)=>{let{asChild:i,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(i?a:t,{...l,ref:s})});return l.displayName="Primitive.".concat(t),{...e,[t]:l}},{}),n=s.forwardRef((e,s)=>(0,r.jsx)(l.label,{...e,ref:s,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));n.displayName="Label";let d=(0,e.i(25913).cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,r.jsx)(n,{ref:s,className:(0,t.cn)(d(),a),...i})});c.displayName=n.displayName},59434,e=>{"use strict";e.s(["default",()=>m],59434);var r=e.i(43476),s=e.i(66575),t=e.i(71645),a=e.i(18566),i=e.i(19455),l=e.i(93479),n=e.i(10204),d=e.i(15288),c=e.i(27225),o=e.i(75157);function u(){let e=(0,a.useRouter)(),{filters:s,setFilters:u,results:m,setResults:h,loading:x,setLoading:p,error:v,setError:f}=(0,c.useScannerStore)(),[j,g]=(0,t.useState)(""),[,b]=(0,t.useState)(null),y=async()=>{if(!j.trim())return;let e=j.split(",").map(e=>e.trim().toUpperCase()).filter(Boolean);await C(e)},N=async e=>{var r;let s=null==(r=e.target.files)?void 0:r[0];if(s){b(s);try{let e=(await s.text()).split("\n").filter(e=>e.trim()),r=e[0].split(",").map(e=>e.trim().toLowerCase()).findIndex(e=>"ticker"===e||"symbol"===e);if(-1===r)return void f('CSV must have a "ticker" or "symbol" column');let t=e.slice(1).map(e=>{var s;return null==(s=e.split(",")[r])?void 0:s.trim().toUpperCase()}).filter(Boolean);await C(t)}catch(e){f("Failed to parse CSV file")}}},C=async e=>{p(!0),f("");try{let r=await fetch("/api/quotes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error("Failed to fetch market data");let t=(await r.json()).data.filter(e=>e.price>0&&(void 0===e.ivr||e.ivr>=s.minIvr));h(t)}catch(e){f("Failed to scan tickers")}finally{p(!1)}},w=(e,r)=>{u({...s,[e]:r})};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Options Scanner"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Find high-probability options trades"})]}),(0,r.jsx)(i.Button,{variant:"outline",onClick:()=>e.push("/dashboard"),children:"Back to Dashboard"})]})})}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,r.jsxs)(d.Card,{children:[(0,r.jsxs)(d.CardHeader,{children:[(0,r.jsx)(d.CardTitle,{children:"Scanner Filters"}),(0,r.jsx)(d.CardDescription,{children:"Configure your screening criteria"})]}),(0,r.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(n.Label,{htmlFor:"minIvr",children:"Min IVR (%)"}),(0,r.jsx)(l.Input,{id:"minIvr",type:"number",value:s.minIvr,onChange:e=>w("minIvr",Number(e.target.value))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(n.Label,{htmlFor:"preferredIvr",children:"Preferred IVR (%)"}),(0,r.jsx)(l.Input,{id:"preferredIvr",type:"number",value:s.preferredIvr,onChange:e=>w("preferredIvr",Number(e.target.value))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(n.Label,{htmlFor:"targetDelta",children:"Target Delta"}),(0,r.jsx)(l.Input,{id:"targetDelta",type:"number",step:"0.01",value:s.targetDelta,onChange:e=>w("targetDelta",Number(e.target.value))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(n.Label,{htmlFor:"spreadWidth",children:"Spread Width"}),(0,r.jsxs)("select",{id:"spreadWidth",className:"w-full p-2 border rounded-md",value:s.spreadWidth,onChange:e=>w("spreadWidth",e.target.value),children:[(0,r.jsx)("option",{value:"2.5",children:"$2.50"}),(0,r.jsx)("option",{value:"5",children:"$5.00"})]})]})]})]}),(0,r.jsxs)(d.Card,{children:[(0,r.jsxs)(d.CardHeader,{children:[(0,r.jsx)(d.CardTitle,{children:"Input Tickers"}),(0,r.jsx)(d.CardDescription,{children:"Enter tickers to scan"})]}),(0,r.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(n.Label,{htmlFor:"tickers",children:"Comma-separated tickers"}),(0,r.jsx)(l.Input,{id:"tickers",placeholder:"AAPL, MSFT, GOOGL",value:j,onChange:e=>g(e.target.value)})]}),(0,r.jsx)(i.Button,{onClick:y,disabled:x||!j.trim(),className:"w-full",children:x?"Scanning...":"Scan Tickers"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(n.Label,{htmlFor:"csv-upload",children:"Or upload CSV file"}),(0,r.jsx)(l.Input,{id:"csv-upload",type:"file",accept:".csv",onChange:N,className:"mt-2"})]})]})]})]}),(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)(d.Card,{children:[(0,r.jsxs)(d.CardHeader,{children:[(0,r.jsx)(d.CardTitle,{children:"Scan Results"}),(0,r.jsxs)(d.CardDescription,{children:[m.length," tickers found"]})]}),(0,r.jsxs)(d.CardContent,{children:[v&&(0,r.jsx)("div",{className:"text-red-600 text-sm mb-4",children:v}),x?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),(0,r.jsx)("p",{className:"mt-2 text-gray-500",children:"Scanning tickers..."})]}):0===m.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No results found. Try adjusting your filters or scanning more tickers."}):(0,r.jsx)("div",{className:"space-y-3",children:m.map((s,t)=>{var a,l;return(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-lg",children:s.ticker}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Price: $",(null==(a=s.price)?void 0:a.toFixed(2))||"N/A"]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-sm",children:["IVR: ",s.ivr?(0,o.formatPercent)(s.ivr/100,1):"N/A"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["RSI: ",(null==(l=s.rsi14)?void 0:l.toFixed(1))||"N/A"]})]}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsx)(i.Button,{size:"sm",onClick:()=>e.push("/recommend?ticker=".concat(s.ticker)),children:"Analyze"})})]},t)})})]})]})})]})})]})}function m(){return(0,r.jsx)(s.AuthWrapper,{children:(0,r.jsx)(u,{})})}}]);